<!DOCTYPE html>

<html>
<head>
  <title>chap01.spec.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
  <script type="text/javascript" async
          src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
  <!-- <script type="text/x-mathjax-config"> -->
  <!--   MathJax.Hub.Config({ -->
  <!--   tex2jax: { -->
  <!--       inlineMath: [ ['$','$'], ['\\(','\\)'] ], -->
  <!--       displayMath: [ ['$$','$$'], ["\\[","\\]"] ], -->
  <!--       processEscapes: true -->
  <!--   } -->
  <!--   }); -->
  <!-- </script> -->
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>chap01.spec.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-pi">"use strict"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h1 id="-1-">第1章 「計算」とは</h1>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h2 id="-">小目次</h2>
<div class="toc">
<ul class="toc">
  <li><a href="http://akimichi.github.io/functionaljs/chap01.spec.html#imperative_model">1.2 命令型モデル</a>
    <ul>
       <li><a href="http://akimichi.github.io/functionaljs/chap01.spec.html#turing_machine">チューリング機械</a></li>
    </ul></li>
  <li><a href="http://akimichi.github.io/functionaljs/chap01.spec.html#functional_model">1.3 関数型モデル</a>
     <ul>
       <li><a href="http://akimichi.github.io/functionaljs/chap01.spec.html#substitution_model">置換ルール</a></li>
       <li><a href="http://akimichi.github.io/functionaljs/chap01.spec.html#function_definition">関数の定義</a></li>
       <li><a href="http://akimichi.github.io/functionaljs/chap01.spec.html#advantages_of_functional_model">関数型モデルを使うメリット</a></li>
     </ul>
</ul>
</div>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-comment">/* アサートライブラリー expect.js の読み込み */</span>
<span class="hljs-keyword">var</span> expect = <span class="hljs-built_in">require</span>(<span class="hljs-string">'expect.js'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h2 id="1-2-section-id-imperative_model-section-">1.2 <section id='imperative_model'>命令型モデル</section></h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>describe(<span class="hljs-string">'命令型モデル'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h3 id="-section-id-turing_machine-section-"><section id='turing_machine'>チューリング機械</section></h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  describe(<span class="hljs-string">'チューリング機械 turing machine'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <blockquote>
<p>参考資料: チューリング機械を現実の装置として製作したもの
<a href="https://www.youtube.com/watch?v=E3keLeMwfHY" title="チューリングマシンの動画"><img src="http://img.youtube.com/vi/E3keLeMwfHY/0.jpg" alt="IMAGE ALT TEXT"></a></p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-comment">/* [A turing machine in 133 bytes of javascript](http://swizec.com/blog/a-turing-machine-in-133-bytes-of-javascript/swizec/3069) を参考にしている */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p><strong>リスト 1.1 JavaScriptによるチューリング機械 </strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-comment">/* #@range_begin(turing) */</span>
    <span class="hljs-keyword">var</span> machine = (program,tape,initState, endState) =&gt; {
      <span class="hljs-comment">/* ヘッドの位置 */</span>
      <span class="hljs-keyword">var</span> position = <span class="hljs-number">0</span>;                          
      <span class="hljs-comment">/* 機械の状態 */</span>
      <span class="hljs-keyword">var</span> state = initState;                     
      <span class="hljs-comment">/* 実行する命令 */</span>
      <span class="hljs-keyword">var</span> currentInstruction = <span class="hljs-literal">undefined</span>;        
      <span class="hljs-comment">/*
        以下のwhileループにて、
        現在の状態が最終状態に到達するまで命令を繰り返す
      */</span>
      <span class="hljs-keyword">while</span>(state != endState) {
        <span class="hljs-keyword">var</span> cell = tape[<span class="hljs-built_in">String</span>(position)];
        <span class="hljs-keyword">if</span> (cell)
          currentInstruction = program[state][cell];
        <span class="hljs-keyword">else</span>
          currentInstruction = program[state].B;
        <span class="hljs-keyword">if</span> (!currentInstruction) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">/* テープに印字する */</span>
          tape[<span class="hljs-built_in">String</span>(position)] = currentInstruction.write; 
          <span class="hljs-comment">/* ヘッドを動かす */</span>
          position += currentInstruction.move;                
          <span class="hljs-comment">/* 次の状態に移る */</span>
          state = currentInstruction.next;                    
        }
      }
      <span class="hljs-keyword">return</span> tape;
    };
    <span class="hljs-comment">/* #@range_end(turing)  */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p><strong>リスト 1.2 チューリング機械の実行例 </strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    describe(<span class="hljs-string">'チューリング機械の実行例'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h4 id="-a-name-turing_demo-a-"><a name="turing_demo"> <strong>チューリング機械の挙動</strong> </a></h4>
<p><img src="images/turing_succ.gif" alt="チューリング機械の挙動"> </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      it(<span class="hljs-string">'チューリング機械でsucc関数を実装する'</span>, (next) =&gt; {
        <span class="hljs-comment">/* #@range_begin(turing_example_succ) */</span>
        <span class="hljs-comment">/* 2進法で10、つまり10進法で2を表すテープ */</span>
        <span class="hljs-keyword">var</span> tape = { 
          <span class="hljs-string">'0'</span>:<span class="hljs-string">'1'</span>,
          <span class="hljs-string">'1'</span>:<span class="hljs-string">'0'</span>
        };
        <span class="hljs-comment">/* チューリング機械に与えるプログラム */</span>
        <span class="hljs-keyword">var</span> program = {
          <span class="hljs-string">'q0'</span>: {<span class="hljs-string">"1"</span>: {<span class="hljs-string">"write"</span>: <span class="hljs-string">"1"</span>, <span class="hljs-string">"move"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"next"</span>: <span class="hljs-string">'q0'</span>},
                 <span class="hljs-string">"0"</span>: {<span class="hljs-string">"write"</span>: <span class="hljs-string">"0"</span>, <span class="hljs-string">"move"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"next"</span>: <span class="hljs-string">'q0'</span>},
                 <span class="hljs-string">"B"</span>: {<span class="hljs-string">"write"</span>: <span class="hljs-string">"B"</span>, <span class="hljs-string">"move"</span>: -<span class="hljs-number">1</span>, <span class="hljs-string">"next"</span>: <span class="hljs-string">'q1'</span>}},
          <span class="hljs-string">'q1'</span>: {<span class="hljs-string">"1"</span>: {<span class="hljs-string">"write"</span>: <span class="hljs-string">"0"</span>, <span class="hljs-string">"move"</span>: -<span class="hljs-number">1</span>, <span class="hljs-string">"next"</span>: <span class="hljs-string">'q1'</span>},
                 <span class="hljs-string">"0"</span>: {<span class="hljs-string">"write"</span>: <span class="hljs-string">"1"</span>, <span class="hljs-string">"move"</span>: -<span class="hljs-number">1</span>, <span class="hljs-string">"next"</span>: <span class="hljs-string">'q2'</span>},
                 <span class="hljs-string">"B"</span>: {<span class="hljs-string">"write"</span>: <span class="hljs-string">"1"</span>, <span class="hljs-string">"move"</span>: -<span class="hljs-number">1</span>, <span class="hljs-string">"next"</span>: <span class="hljs-string">'q3'</span>}},
          <span class="hljs-string">'q2'</span>: {<span class="hljs-string">"1"</span>: {<span class="hljs-string">"write"</span>: <span class="hljs-string">"1"</span>, <span class="hljs-string">"move"</span>: -<span class="hljs-number">1</span>, <span class="hljs-string">"next"</span>: <span class="hljs-string">'q2'</span>},
                 <span class="hljs-string">"0"</span>: {<span class="hljs-string">"write"</span>: <span class="hljs-string">"0"</span>, <span class="hljs-string">"move"</span>: -<span class="hljs-number">1</span>, <span class="hljs-string">"next"</span>: <span class="hljs-string">'q2'</span>},
                 <span class="hljs-string">"B"</span>: {<span class="hljs-string">"write"</span>: <span class="hljs-string">"B"</span>, <span class="hljs-string">"move"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"next"</span>: <span class="hljs-string">'q4'</span>}},
          <span class="hljs-string">'q3'</span>: {<span class="hljs-string">"1"</span>: {<span class="hljs-string">"write"</span>: <span class="hljs-string">"1"</span>, <span class="hljs-string">"move"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"next"</span>: <span class="hljs-string">'q4'</span>},
                 <span class="hljs-string">"0"</span>: {<span class="hljs-string">"write"</span>: <span class="hljs-string">"0"</span>, <span class="hljs-string">"move"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"next"</span>: <span class="hljs-string">'q4'</span>},
                 <span class="hljs-string">"B"</span>: {<span class="hljs-string">"write"</span>: <span class="hljs-string">"B"</span>, <span class="hljs-string">"move"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"next"</span>: <span class="hljs-string">'q4'</span>}}
        };
        <span class="hljs-comment">/* #@range_end(turing_example_succ) */</span>
        expect(</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p><strong>リスト 1.3 1を加えるチューリング機械の実行 </strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-comment">/* #@range_begin(turing_example_succ_test) */</span>
          machine(program,     <span class="hljs-comment">// プログラム</span>
                  tape,        <span class="hljs-comment">// テープ</span>
                  <span class="hljs-string">'q0'</span>,        <span class="hljs-comment">// 初期状態</span>
                  <span class="hljs-string">'q4'</span>)        <span class="hljs-comment">// 終了状態</span>
          <span class="hljs-comment">/* #@range_end(turing_example_succ_test) */</span>
        ).to.eql(
          <span class="hljs-comment">/* #@range_begin(turing_example_succ_test_result) */</span>
          {
            <span class="hljs-string">'-1'</span>: <span class="hljs-string">'B'</span>,
            <span class="hljs-string">'0'</span>: <span class="hljs-string">'1'</span>,
            <span class="hljs-string">'1'</span>: <span class="hljs-string">'1'</span>,
            <span class="hljs-string">'2'</span>: <span class="hljs-string">'B'</span>
          }
          <span class="hljs-comment">/* #@range_end(turing_example_succ_test_result) */</span>
        );
        next();
      });
    });
  });
});</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h2 id="1-3-section-id-functional_model-section-">1.3 <section id='functional_model'>関数型モデル</section></h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>describe(<span class="hljs-string">'関数型モデル'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <h3 id="-section-id-substitution_model-section-"><section id='substitution_model'>置換ルール</section></h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  describe(<span class="hljs-string">'置換ルール'</span>, () =&gt; {
    it(<span class="hljs-string">'単純なλ式の簡約'</span>, (next) =&gt; {
      <span class="hljs-comment">/* #@range_begin(succ) */</span>
      <span class="hljs-keyword">var</span> succ = (n) =&gt; {
        <span class="hljs-keyword">return</span> n + <span class="hljs-number">1</span>;
      };
      <span class="hljs-comment">/* #@range_end(succ) */</span>
      expect(
        succ(<span class="hljs-number">1</span>)
      ).to.eql(
        <span class="hljs-number">2</span>
      );
      next();
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p><strong>リスト 1.5 add関数 </strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">'add関数'</span>, (next) =&gt; {
      <span class="hljs-comment">/* #@range_begin(recursive_add) */</span>
      <span class="hljs-keyword">var</span> succ = (n) =&gt; {
        <span class="hljs-keyword">return</span> n + <span class="hljs-number">1</span>;
      };
      <span class="hljs-keyword">var</span> prev = (n) =&gt; {
        <span class="hljs-keyword">return</span> n - <span class="hljs-number">1</span>;
      };
      <span class="hljs-comment">/* add関数の定義 */</span>
      <span class="hljs-keyword">var</span> add = (x,y) =&gt; { 
        <span class="hljs-keyword">if</span>(y &lt; <span class="hljs-number">1</span>){
          <span class="hljs-keyword">return</span> x;
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">/* add関数の再帰呼び出し */</span>
          <span class="hljs-keyword">return</span> add(succ(x), prev(y)); 
        }
      };
      <span class="hljs-comment">/* #@range_end(recursive_add) */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p><a name="add_reduction_demo"> add(3,2)の簡約 </a>
<img src="images/add-reduction.gif" alt="add関数の簡約"> </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      expect(
        add(<span class="hljs-number">3</span>,<span class="hljs-number">2</span>)
      ).to.eql(
        <span class="hljs-number">5</span>
      );
      next();
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <h4 id="-">コラム 再帰と漸化式</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">'再帰と漸化式'</span>, (next) =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p><strong>リスト 1.6 漸化式の例 </strong></p>
<p>$$ a(n) = a(n-1) + 3$$</p>
<p>ただし、 $$ a(1) = 1 $$</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-comment">/* #@range_begin(recursion) */</span>
      <span class="hljs-keyword">var</span> a = (n) =&gt; {
        <span class="hljs-keyword">if</span>(n === <span class="hljs-number">1</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-comment">// 初項は1</span>
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> a(n-<span class="hljs-number">1</span>) + <span class="hljs-number">3</span>; <span class="hljs-comment">// 公差は3</span>
        }
      };
      <span class="hljs-comment">/* #@range_end(recursion) */</span>
      expect(
        a(<span class="hljs-number">1</span>)
      ).to.eql(
        <span class="hljs-number">1</span>
      );
      expect(
        a(<span class="hljs-number">2</span>)
      ).to.eql(
        <span class="hljs-number">4</span>
      );
      expect(
        a(<span class="hljs-number">3</span>)
      ).to.eql(
        <span class="hljs-number">7</span>
      );
      next();
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p><strong>リスト 1.7 while文を利用したadd関数 </strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">'while文を利用したadd関数'</span>, (next) =&gt; {
      <span class="hljs-comment">/* add関数の定義 */</span>
      <span class="hljs-comment">/* #@range_begin(imperative_add) */</span>
      <span class="hljs-keyword">var</span> add = (x,y) =&gt; { 
        <span class="hljs-keyword">while</span>(y &gt; <span class="hljs-number">0</span>) {  <span class="hljs-comment">// yが0より大きい間、反復処理を実行する</span>
          x = x + <span class="hljs-number">1</span>;    <span class="hljs-comment">// 変数xを更新する </span>
          y = y - <span class="hljs-number">1</span>;    <span class="hljs-comment">// 変数yを更新する</span>
        }
        <span class="hljs-keyword">return</span> x;
      };
      <span class="hljs-comment">/* #@range_end(imperative_add) */</span>
      expect(
        add(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)
      ).to.eql(
        <span class="hljs-number">3</span>
      );
      expect(
        add(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)
      ).to.eql(
        <span class="hljs-number">5</span>
      );
      expect(
        add(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>)
      ).to.eql(
        <span class="hljs-number">2</span>
      );
      next();
    });
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <h3 id="-section-id-function_definition-section-"><section id='function_definition'>関数の定義</section></h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  describe(<span class="hljs-string">'関数の定義'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p><strong>リスト 1.8 かけ算の定義 </strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">'かけ算の定義'</span>, (next) =&gt; {
      <span class="hljs-keyword">var</span> succ = (n) =&gt; {
        <span class="hljs-keyword">return</span> n + <span class="hljs-number">1</span>;
      };
      <span class="hljs-keyword">var</span> prev = (n) =&gt; {
        <span class="hljs-keyword">return</span> n - <span class="hljs-number">1</span>;
      };
      <span class="hljs-keyword">var</span> add = (x, y) =&gt; { <span class="hljs-comment">// add関数の定義</span>
        <span class="hljs-keyword">if</span>(y &lt; <span class="hljs-number">1</span>){
          <span class="hljs-keyword">return</span> x;
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> add(succ(x),prev(y)); <span class="hljs-comment">// add関数の再帰呼び出し</span>
        }
      };
      <span class="hljs-comment">/* #@range_begin(multiply) */</span>
      <span class="hljs-keyword">var</span> times = (count,fun,arg, memo) =&gt; {
        <span class="hljs-keyword">if</span>(count &gt; <span class="hljs-number">1</span>) {
          <span class="hljs-comment">/* times関数を再帰呼び出し */</span>
          <span class="hljs-keyword">return</span> times(count-<span class="hljs-number">1</span>,fun,arg, fun(memo,arg)); 
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> fun(memo,arg);
        }
      };
      <span class="hljs-keyword">var</span> multiply = (n,m) =&gt; {
        <span class="hljs-comment">/* 2番目の引数にadd関数を渡している */</span>
        <span class="hljs-keyword">return</span> times(m, add, n, <span class="hljs-number">0</span>); 
      };
      <span class="hljs-comment">/* #@range_end(multiply) */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <h4 id="-a-name-multiply_reduction_demo-multiply-2-3-a-"><a name="multiply_reduction_demo"> <strong>multiply(2,3)の簡約</strong> </a></h4>
<p><img src="images/multiply_reduction.gif" alt="multiply関数の簡約"> </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      expect(
        add(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)
      ).to.eql(
        <span class="hljs-number">5</span>
      );
      expect(
        multiply(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)
      ).to.eql(
        <span class="hljs-number">6</span>
      );
      expect(
        multiply(<span class="hljs-number">4</span>,<span class="hljs-number">6</span>)
      ).to.eql(
        <span class="hljs-number">24</span>
      );
      expect(
        multiply(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)
      ).to.eql(
        <span class="hljs-number">1</span>
      );
      expect(
        multiply(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)
      ).to.eql(
        <span class="hljs-number">0</span>
      );
      next();
    });
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <h3 id="-section-id-advantages_of_functional_model-section-"><section id='advantages_of_functional_model'>関数型モデルを使うメリット</section></h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  describe(<span class="hljs-string">'関数型モデルを使うメリット'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p><strong>リスト 1.9 べき乗の定義 </strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">'べき乗の定義'</span>, (next) =&gt; {
      <span class="hljs-keyword">var</span> succ = (n) =&gt; {
        <span class="hljs-keyword">return</span> n + <span class="hljs-number">1</span>;
      };
      <span class="hljs-keyword">var</span> prev = (n) =&gt; {
        <span class="hljs-keyword">return</span> n - <span class="hljs-number">1</span>;
      };
      <span class="hljs-keyword">var</span> add = (x, y) =&gt; {
        <span class="hljs-keyword">if</span>(y &lt; <span class="hljs-number">1</span>){
          <span class="hljs-keyword">return</span> x;
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> add(succ(x),prev(y));
        }
      };
      <span class="hljs-keyword">var</span> times = (count,fun,arg, memo) =&gt; {
        <span class="hljs-keyword">if</span>(count &gt; <span class="hljs-number">1</span>) {
          <span class="hljs-keyword">return</span> times(count-<span class="hljs-number">1</span>,fun,arg, fun(arg,memo));
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> fun(arg,memo);
        }
      };
      <span class="hljs-keyword">var</span> multiply = (n,m) =&gt; {
        <span class="hljs-keyword">return</span> times(m, add, n, <span class="hljs-number">0</span>);
      };
      <span class="hljs-comment">/* #@range_begin(exponential) */</span>
      <span class="hljs-keyword">var</span> exponential = (n,m) =&gt; {
        <span class="hljs-keyword">return</span> times(m, multiply, n, <span class="hljs-number">1</span>);
      };
      <span class="hljs-comment">/* #@range_end(exponential) */</span>
      expect(
        exponential(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)
      ).to.eql(
        <span class="hljs-number">8</span>
      );
      next();
    });
  });
});</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p><a href="index.html">目次に戻る</a> <a href="chap02.spec.html">次章に移る</a> </p>

            </div>
            
        </li>
        
    </ul>
  <!-- <div id="footer">  目次に戻る。 </div> -->
  <!-- </div> -->
</body>
</html>
