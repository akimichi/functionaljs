<!DOCTYPE html>

<html>
<head>
  <title>chap04.spec.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
  <script type="text/javascript" async
          src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
  <!-- <script type="text/x-mathjax-config"> -->
  <!--   MathJax.Hub.Config({ -->
  <!--   tex2jax: { -->
  <!--       inlineMath: [ ['$','$'], ['\\(','\\)'] ], -->
  <!--       displayMath: [ ['$$','$$'], ["\\[","\\]"] ], -->
  <!--       processEscapes: true -->
  <!--   } -->
  <!--   }); -->
  <!-- </script> -->
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>chap04.spec.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-pi">"use strict"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h1 id="-4-">第4章 データの種類と特徴</h1>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h2 id="-">小目次</h2>
<div class="toc">
<ul class="toc">
  <li><a href="http://akimichi.github.io/functionaljs/chap04.spec.html#what-is-type">4.1 型とは何か</a></li>
  <li><a href="http://akimichi.github.io/functionaljs/chap04.spec.html#basic-type">4.2 基本型</a></li>
  <li><a href="http://akimichi.github.io/functionaljs/chap04.spec.html#composite-type">4.3 合成型</a>
    <ul>
      <li><a href="http://akimichi.github.io/functionaljs/chap04.spec.html#object-type">オブジェクト型</a></li>
      <li><a href="http://akimichi.github.io/functionaljs/chap04.spec.html#array-type">配列型</a></li>
      <li><a href="http://akimichi.github.io/functionaljs/chap04.spec.html#function-type">関数型</a></li>
      <li><a href="http://akimichi.github.io/functionaljs/chap04.spec.html#abstract-datatype">抽象データ型</a></li>
      <li><a href="http://akimichi.github.io/functionaljs/chap04.spec.html#mutability-of-composite-type">合成型の可変性</a></li>
   </ul></li>
  <li><a href="http://akimichi.github.io/functionaljs/chap04.spec.html#variable-and-data">4.4 変数とデータの関係</a>
    <ul>
       <li><a href="http://akimichi.github.io/functionaljs/chap04.spec.html#variable-binding">変数のバインド</a></li>
      <li><a href="http://akimichi.github.io/functionaljs/chap04.spec.html#variable-scope">変数のスコープ</a></li></ul>
  </li>
  <li><a href="http://akimichi.github.io/functionaljs/chap04.spec.html#mechanism-of-referential-transparency">4.5 参照透過性の仕組み</a>
     <ul>
       <li><a href="http://akimichi.github.io/functionaljs/chap04.spec.html#mechanism-of-immutability">不変なデータの仕組み</a></li>
       <li><a href="http://akimichi.github.io/functionaljs/chap04.spec.html#mechanism-of-assingment">代入の仕組みと効果</a></li></ul>
  </li>
</ul>
</div>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> expect = <span class="hljs-built_in">require</span>(<span class="hljs-string">'expect.js'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h2 id="4-1-section-id-what-is-type-section-">4.1 <section id='what-is-type'>型とは何か</section></h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>describe(<span class="hljs-string">'型とは何か'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p><strong>リスト4.1</strong> 自然数の作り方</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  it(<span class="hljs-string">'自然数の作り方'</span>, (next) =&gt; {
    <span class="hljs-comment">/* #@range_begin(integer_construction) */</span>
    <span class="hljs-keyword">var</span> succ = (n) =&gt; {
      <span class="hljs-keyword">return</span> n + <span class="hljs-number">1</span>;
    };
    expect(
      succ(<span class="hljs-number">0</span>)
    ).to.eql(
      <span class="hljs-number">1</span>
    );
    expect(
      succ(succ(<span class="hljs-number">0</span>))
    ).to.eql(
      <span class="hljs-number">2</span>
    );
    <span class="hljs-comment">/* #@range_end(integer_construction) */</span>
    next();
  });
});</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <h2 id="4-2-section-id-basic-type-section-">4.2 <section id='basic-type'>基本型</section></h2>
<p>基本型とは、そのデータ型の定義に他のデータ型を含まないような原始的な型をいう。</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>describe(<span class="hljs-string">'基本型'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p><strong>リスト4.2</strong> 未定義の変数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  it(<span class="hljs-string">'未定義の変数'</span>, (next) =&gt; {
    <span class="hljs-comment">/* #@range_begin(undefined_variable) */</span>
    <span class="hljs-keyword">var</span> variable; <span class="hljs-comment">// 宣言されているが値と結びついていない変数</span>
    expect(
      variable
    ).to.eql(
      <span class="hljs-literal">undefined</span>
    );
    <span class="hljs-comment">/* #@range_end(undefined_variable) */</span>
    next();
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h3 id="-">基本型は不変なデータである</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  describe(<span class="hljs-string">'基本型は不変なデータである'</span>, () =&gt; {
    it(<span class="hljs-string">'真理値型は不変である'</span>, (next) =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <pre><code>node&gt; <span class="hljs-literal">true</span> === <span class="hljs-literal">true</span>
<span class="hljs-literal">true</span>
</code></pre>
            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-comment">/* #@range_begin(truth_is_immutable) */</span>
      <span class="hljs-keyword">var</span> truth = <span class="hljs-literal">true</span>;
      expect(
        <span class="hljs-literal">true</span> === <span class="hljs-literal">true</span>
      ).to.eql(
        <span class="hljs-literal">true</span>
      );
      <span class="hljs-comment">/* #@range_end(truth_is_immutable) */</span>
      next();
    });
    it(<span class="hljs-string">'数値型は不変である'</span>, (next) =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <pre><code>node&gt; <span class="hljs-number">1</span> === <span class="hljs-number">1</span>
<span class="hljs-literal">true</span>
</code></pre>
            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-comment">/* #@range_begin(number_is_immutable) */</span>
      expect(
        <span class="hljs-number">1</span> === <span class="hljs-number">1</span>
      ).to.eql(
        <span class="hljs-literal">true</span>
      );
      <span class="hljs-comment">/* #@range_end(number_is_immutable) */</span>
      next();
    });
    it(<span class="hljs-string">'文字列は不変である'</span>, (next) =&gt; {
      <span class="hljs-comment">/* #@range_begin(string_is_immutable) */</span>
      <span class="hljs-keyword">var</span> str = <span class="hljs-string">"to be, or not to be"</span>;
      expect(
        str
      ).to.eql(
        <span class="hljs-string">"to be, or not to be"</span>
      );
      <span class="hljs-comment">/* #@range_end(string_is_immutable)  */</span>
      next();
    });
  });
});</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h2 id="4-3-section-id-composite-type-section-">4.3 <section id='composite-type'>合成型</section></h2>
<p>合成型は、内部に構造を持つ</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>describe(<span class="hljs-string">'合成型'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <h3 id="-section-id-object-type-section-"><section id='object-type'>オブジェクト型</section></h3>
<blockquote>
<p>参考資料: <a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Working_with_Objects">オブジェクトを利用する</a></p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>  describe(<span class="hljs-string">'オブジェクト型'</span>, () =&gt; {
    describe(<span class="hljs-string">'アドレス帳の例'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p><strong>リスト4.4</strong> オブジェクト型の例</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      it(<span class="hljs-string">'オブジェクト型の例'</span>, (next) =&gt; {
        <span class="hljs-comment">/* #@range_begin(object_instance_example) */</span>
        <span class="hljs-keyword">var</span> addressbook = {
          No1: <span class="hljs-string">"Alan Turing"</span>,
          No2: <span class="hljs-string">"Haskell Curry"</span>,
          No3: <span class="hljs-string">"Alonzo Church"</span>,
          No4: <span class="hljs-string">"Ada Lovelace"</span>
        };
        <span class="hljs-comment">/* #@range_end(object_instance_example) */</span>
        next();
      });</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p><strong>リスト4.5</strong> オブジェクト型の入れ子</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      it(<span class="hljs-string">'オブジェクト型の入れ子'</span>, (next) =&gt; {
        <span class="hljs-comment">/* ##@range_begin(object_can_embed_object) */</span>
        <span class="hljs-keyword">var</span> addressbook = {
          No1: {
            name: <span class="hljs-string">"Alan Turing"</span>,
            gender: <span class="hljs-string">"male"</span>,
            birthDay: <span class="hljs-string">"1912/6/23"</span>
          },
          No2: {
            name: <span class="hljs-string">"Haskell Curry"</span>,
            gender: <span class="hljs-string">"male"</span>,
            birthDay: <span class="hljs-string">"1900/9/12"</span>
          },
          No3: {
            name: <span class="hljs-string">"Alonzo Church"</span>,
            gender: <span class="hljs-string">"male"</span>,
            birthDay: <span class="hljs-string">"1903/6/14"</span>
          },
          No4: {
            name: <span class="hljs-string">"Ada Lovelace"</span>,
            gender: <span class="hljs-string">"female"</span>,
            birthDay: <span class="hljs-string">"1815/12/10"</span>
          }
        };
        <span class="hljs-comment">/* ##@range_end(object_can_embed_object) */</span>
        <span class="hljs-keyword">var</span> addressbook_nested = {
          <span class="hljs-comment">/* ##@range_begin(object_can_embed_object_nested) */</span>
          No1: {
            name: <span class="hljs-string">"Alan Turing"</span>,
            gender: <span class="hljs-string">"male"</span>,
            birthDay: {
              year: <span class="hljs-number">1912</span>,
              month: <span class="hljs-number">6</span>,
              day: <span class="hljs-number">23</span>
            }
          }
          <span class="hljs-comment">/* ##@range_end(object_can_embed_object_nested) */</span>
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p><strong>リスト4.6</strong> オブジェクト型インスタンスへのアクセス</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-comment">/* #@range_begin(object_access) */</span>
        expect(
          addressbook.No1.name        <span class="hljs-comment">// オブジェクト.キー記法</span>
        ).to.eql(
          <span class="hljs-string">"Alan Turing"</span>
        );
        expect(
          addressbook[<span class="hljs-string">"No1"</span>][<span class="hljs-string">"name"</span>]  <span class="hljs-comment">// オブジェクト[キー]記法</span>
        ).to.eql(
          <span class="hljs-string">"Alan Turing"</span>
        );
        <span class="hljs-comment">/* #@range_end(object_access) */</span>
        next();
      });
    });
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <h3 id="-section-id-array-type-section-"><section id='array-type'>配列型</section></h3>
<blockquote>
<p>参考資料: <a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array">https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array</a>  </p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>  describe(<span class="hljs-string">'配列型'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p><strong>リスト4.7</strong> 配列の基本操作</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">"配列の基本操作"</span>, (next) =&gt; {
      <span class="hljs-comment">/* #@range_begin(array_access) */</span>
      <span class="hljs-keyword">var</span> array = [<span class="hljs-number">10</span>,<span class="hljs-number">11</span>,<span class="hljs-number">12</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>配列は0から始まるインデックスを持つ</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      expect(
        array[<span class="hljs-number">0</span>] 
      ).to.eql(
        <span class="hljs-number">10</span>
      );
      expect(
        array[<span class="hljs-number">2</span>]
      ).to.eql(
        <span class="hljs-number">12</span>
      );</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>存在しない要素にアクセスするとundefinedとなる</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      expect(
        array[<span class="hljs-number">100</span>] 
      ).to.eql(
        <span class="hljs-literal">undefined</span>
      );
      <span class="hljs-comment">/* #@range_end(array_access) */</span>
      next();
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p><strong>リスト4.8</strong> sortによる配列要素の並べかえ</p>
<blockquote>
<p>[5,3,4,1,2]の配列を昇順に並べかえる
参考資料: <a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/sort">https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/sort</a></p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">"sortによる配列要素の並べかえ"</span>, (next) =&gt; {
      <span class="hljs-comment">/* #@range_begin(sort_in_array) */</span>
      <span class="hljs-keyword">var</span> array = [<span class="hljs-number">5</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>];
      expect(
        array.sort((n,m) =&gt; {
          <span class="hljs-keyword">return</span> n &gt; m;
        })
      ).to.eql(
        [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]
      );
      <span class="hljs-comment">/* #@range_end(sort_in_array) */</span>
      next();
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p><strong>リスト4.9</strong> 名簿の配列型表現</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">"名簿の配列型表現"</span>, (next) =&gt; {
      <span class="hljs-comment">/* #@range_begin(addressbook_example_in_array) */</span>
      <span class="hljs-keyword">var</span> addressbook = [ <span class="hljs-comment">// 配列に要素を格納する</span>
        {
          name: <span class="hljs-string">"Alan Turing"</span>,
          gender: <span class="hljs-string">"male"</span>,
          birthDay: <span class="hljs-string">"1912/6/23"</span>
        },
        {
          name: <span class="hljs-string">"Haskell Curry"</span>,
          gender: <span class="hljs-string">"male"</span>,
          birthDay: <span class="hljs-string">"1900/9/12"</span>
        },
        {
          name: <span class="hljs-string">"Alonzo Church"</span>,
          gender: <span class="hljs-string">"male"</span>,
          birthDay: <span class="hljs-string">"1903/6/14"</span>
        },
        {
          name: <span class="hljs-string">"Ada Lovelace"</span>,
          gender: <span class="hljs-string">"female"</span>,
          birthDay: <span class="hljs-string">"1815/12/10"</span>
        }
      ];
      <span class="hljs-comment">/* #@range_end(addressbook_example_in_array) */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p><strong>リスト4.10</strong> 名簿の並べかえ</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-comment">/* #@range_begin(sorting_array) */</span>
      expect(
        addressbook.sort((onePerson,anotherPerson) =&gt; {
          <span class="hljs-keyword">return</span> onePerson.name &gt; anotherPerson.name;
        })
      ).to.eql(
        [
          {
            name: <span class="hljs-string">"Ada Lovelace"</span>,
            gender: <span class="hljs-string">"female"</span>,
            birthDay: <span class="hljs-string">"1815/12/10"</span>
          },
          {
            name: <span class="hljs-string">"Alan Turing"</span>,
            gender: <span class="hljs-string">"male"</span>,
            birthDay: <span class="hljs-string">"1912/6/23"</span>
          },
          {
            name: <span class="hljs-string">"Alonzo Church"</span>,
            gender: <span class="hljs-string">"male"</span>,
            birthDay: <span class="hljs-string">"1903/6/14"</span>
          },
          {
            name: <span class="hljs-string">"Haskell Curry"</span>,
            gender: <span class="hljs-string">"male"</span>,
            birthDay: <span class="hljs-string">"1900/9/12"</span>
          }
        ]
      );
      <span class="hljs-comment">/* #@range_end(sorting_array) */</span>
      next();
    });
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <h3 id="-section-id-function-type-section-"><section id='function-type'>関数型</section></h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  describe(<span class="hljs-string">'関数型'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p><strong>リスト4.11</strong> 関数はオブジェクト型である</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">'関数はオブジェクト型である'</span>, (next) =&gt; {
      <span class="hljs-comment">/* #@range_begin(function_is_object_type) */</span>
      <span class="hljs-keyword">var</span> func = (n) =&gt; {
        <span class="hljs-keyword">return</span> n;
      };
      <span class="hljs-comment">/* lengthプロパティにアクセスするとアリティ（引数の数）が返る */</span>
      expect(
        func.length
      ).to.eql(
        <span class="hljs-number">1</span>
      );
      <span class="hljs-comment">/* #@range_end(function_is_object_type) */</span>
      next();
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p><strong>リスト4.12</strong> 引数のない関数 </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">'引数のない関数'</span>, (next) =&gt; {
      <span class="hljs-comment">/* #@range_begin(function_without_argument) */</span>
      <span class="hljs-keyword">var</span> three = () =&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>;
      };
      expect(
        three()
      ).to.eql(
        <span class="hljs-number">3</span>
      );
      <span class="hljs-comment">/* #@range_end(function_without_argument) */</span>
      next();
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p><strong>リスト4.13</strong> 関数と変数の類似</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">'関数と変数の類似'</span>, (next) =&gt; {
      <span class="hljs-comment">/* #@range_begin(function_resembles_variable) */</span>
      <span class="hljs-keyword">var</span> three = <span class="hljs-number">3</span>;
      expect(
        three
      ).to.eql(
        <span class="hljs-number">3</span>
      );
      <span class="hljs-comment">/* #@range_end(function_resembles_variable) */</span>
      next();
    });
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <h3 id="-section-id-abstract-datatype-section-"><section id='abstract-datatype'>抽象データ型</section></h3>
<blockquote>
<p>参考資料: <a href="https://ja.wikipedia.org/wiki/%E6%8A%BD%E8%B1%A1%E3%83%87%E3%83%BC%E3%82%BF%E5%9E%8B">抽象データ型</a></p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>  describe(<span class="hljs-string">'抽象データ型'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p><strong>リスト4.16</strong> 具体的なリストの利用法</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">'具体的なリストの利用法'</span>, (next) =&gt; {
      <span class="hljs-comment">/* 具体的なリスト型を定義しておく */</span>
      <span class="hljs-comment">/* ただし、引数listにはJavaScriptの配列が入る */</span>
      <span class="hljs-keyword">var</span> cons = (n, list) =&gt; {
        <span class="hljs-keyword">return</span> [n].concat(list);
      };
      <span class="hljs-keyword">var</span> head = (list) =&gt; {
        <span class="hljs-keyword">return</span> list[<span class="hljs-number">0</span>];
      };
      <span class="hljs-keyword">var</span> tail = (list) =&gt; {
        <span class="hljs-keyword">return</span> list.slice(<span class="hljs-number">1</span>,list.length);
      };
      <span class="hljs-keyword">var</span> empty = (_) =&gt; {
        <span class="hljs-keyword">return</span> [];
      };
      <span class="hljs-keyword">var</span> isEmpty = (list) =&gt; {
        <span class="hljs-keyword">return</span> list.length === <span class="hljs-number">0</span>;
      };
      <span class="hljs-comment">/* #@range_begin(list_as_abstract_type) */</span>
      expect(
        head(tail(cons(<span class="hljs-number">1</span>,cons(<span class="hljs-number">2</span>,empty()))))
      ).to.eql(
        <span class="hljs-number">2</span>
      );
      <span class="hljs-comment">/* #@range_end(list_as_abstract_type) */</span>
      next();
    });
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <h3 id="-section-id-mutability-of-composite-type-section-"><section id='mutability-of-composite-type'>合成型の可変性</section></h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  describe(<span class="hljs-string">'合成型の可変性'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p><strong>リスト4.17</strong> 配列型の可変性</p>
<blockquote>
<p>JavaScriptの配列は、その一部を書きかえることができる</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">'配列型の可変性'</span>, (next) =&gt; {
      <span class="hljs-comment">/* #@range_begin(array_is_mutable) */</span>
      <span class="hljs-keyword">var</span> array = [<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];
      array[<span class="hljs-number">0</span>] = <span class="hljs-number">7</span>; <span class="hljs-comment">// 配列の一部を書きかえている</span>
      expect(
        array
      ).not.to.eql(
        [<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>] <span class="hljs-comment">// [7,1,2,3]に変更されている</span>
      );
      <span class="hljs-comment">/* #@range_end(array_is_mutable) */</span>
      next();
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p><strong>リスト4.18</strong> 配列の破壊的メソッド</p>
<blockquote>
<p>配列のreverse関数は、元の配列を逆転させる</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">'配列の破壊的メソッド'</span>, (next) =&gt; {
      <span class="hljs-comment">/* #@range_begin(destructive_reverse) */</span>
      <span class="hljs-keyword">var</span> array = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>];
      expect(
        array.reverse()
      ).to.eql(
        [<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>]
      );
      expect(
        array
      ).not.to.eql(
        [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]  <span class="hljs-comment">// 変数arrayの中身が[5,4,3,2,1]に変更されている</span>
      );
      <span class="hljs-comment">/* #@range_end(destructive_reverse) */</span>
      next();
    });
    it(<span class="hljs-string">'非破壊的なreverse関数'</span>, (next) =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p><strong>リスト4.19</strong> 非破壊的なreverse関数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-comment">/* #@range_begin(immutable_reverse) */</span>
      <span class="hljs-keyword">var</span> reverse = (array) =&gt; {
        <span class="hljs-keyword">return</span> array.reduce((accumulator, item) =&gt; {
          <span class="hljs-keyword">return</span> [item].concat(accumulator);
        }, []);
      };
      <span class="hljs-keyword">var</span> array = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>];
      expect(((_) =&gt; {
        <span class="hljs-keyword">var</span> reversed = reverse(array);
        <span class="hljs-keyword">return</span> array; <span class="hljs-comment">// 逆転前の配列を返す</span>
      })()).to.eql(
        [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]   <span class="hljs-comment">// 逆転前の配列と同じ</span>
      );
      <span class="hljs-comment">/* #@range_end(immutable_reverse) */</span>
      expect(
        reverse(array)
      ).to.eql(
        [<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>]
      );</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p><strong>リスト4.20</strong> 非破壊的なreverse関数は完全には不変でない</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-comment">/* #@range_begin(immutable_reverse_is_not_immutable) */</span>
      <span class="hljs-keyword">var</span> reversed = reverse(array);
      reversed[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;
      expect(
        reversed
      ).to.eql(
        [<span class="hljs-number">0</span>,<span class="hljs-number">4</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>]
      );
      <span class="hljs-comment">/* #@range_end(immutable_reverse_is_not_immutable) */</span>
      next();
    });
  });
});</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <h2 id="4-4-section-id-variable-and-data-section-">4.4 <section id='variable-and-data'>変数とデータの関係</section></h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>describe(<span class="hljs-string">'変数とデータの関係'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <h3 id="-section-id-variable-binding-section-"><section id='variable-binding'>変数のバインド</section></h3>
<blockquote>
<p>変数boundはバインドされているが、変数unboundはバインドされていない</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>  it(<span class="hljs-string">'変数のバインド'</span>, (next) =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p><strong>リスト4.21</strong> バインド変数と自由変数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-comment">/* #@range_begin(variable_binding_value) */</span>
    <span class="hljs-keyword">var</span> bound = <span class="hljs-string">"我思うゆえに我あり"</span>;
    expect(
      bound
    ).to.eql(
      <span class="hljs-string">"我思うゆえに我あり"</span>
    );
    expect(
      (_) =&gt; { <span class="hljs-comment">// 例外をキャッチするにはexpectに関数を渡す</span>
        unbound <span class="hljs-comment">// 変数unboundは自由変数</span>
      }
    ).to.throwException((exception)=&gt; {
      expect(exception).to.be.a(
        <span class="hljs-built_in">ReferenceError</span>
      );
    });
    <span class="hljs-comment">/* #@range_end(variable_binding_value) */</span>
    next();
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p><strong>リスト4.22</strong> 関数本体でのバインド変数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  it(<span class="hljs-string">'関数本体でのバインド変数'</span>, (next) =&gt; {
    <span class="hljs-comment">/* #@range_begin(bound_variable_in_function) */</span>
    <span class="hljs-keyword">var</span> add = (x,y) =&gt; { <span class="hljs-comment">// xとyは引数</span>
      <span class="hljs-keyword">return</span> x + y; <span class="hljs-comment">// それゆえに、xもyもバインド変数</span>
    };
    <span class="hljs-comment">/* #@range_end(bound_variable_in_function) */</span>
    expect(
      add(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)
    ).to.eql(
      <span class="hljs-number">5</span>
    );
    expect(
      add(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)
    ).to.eql(
      ((x,y) =&gt; {
        <span class="hljs-keyword">return</span> x + y;
      })(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)
    );
    next();
  });
  describe(<span class="hljs-string">'環境と値'</span>, () =&gt; {
    it(<span class="hljs-string">'関数本体での自由変数'</span>, (next) =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p><strong>リスト4.23</strong> 関数本体での自由変数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-comment">/* #@range_begin(free_variable_in_function) */</span>
      <span class="hljs-keyword">var</span> addWithFreeVariable = (x) =&gt; {
        <span class="hljs-keyword">return</span> x + y;  <span class="hljs-comment">// xはバインド変数だが、yは自由変数</span>
      };
      <span class="hljs-comment">/* #@range_end(free_variable_in_function) */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>関数本体での自由変数のテスト</p>
<p>例外が発生する場合は、無名関数で包みこみ、発生した例外を以下のように捕捉する。</p>
<blockquote>
<p>to.throwException((exception)=&gt; {
  expect(exception).to.be.a(
    ReferenceError
  );
})</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-comment">/* #@range_begin(free_variable_in_function_test) */</span>
      expect(
        (_) =&gt; {
          <span class="hljs-keyword">return</span> addWithFreeVariable(<span class="hljs-number">1</span>);
        }
      ).to.throwException((exception)=&gt; {
        expect(exception).to.be.a(
          <span class="hljs-built_in">ReferenceError</span>
        );
      });
      <span class="hljs-comment">/* #@range_end(free_variable_in_function_test) */</span>
      next();
    });
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <h3 id="-section-id-variable-scope-section-"><section id='variable-scope'>変数のスコープ</section></h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  describe(<span class="hljs-string">'変数のスコープ'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p><strong>リスト4.25</strong> 関数とローカルスコープ</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">'関数とローカルスコープ'</span>, (next) =&gt; {
      <span class="hljs-comment">/* #@range_begin(function_creates_scope) */</span>
      <span class="hljs-keyword">var</span> createScope = (_) =&gt;  { <span class="hljs-comment">// ローカルスコープを作る</span>
        <span class="hljs-keyword">var</span> innerScope = <span class="hljs-string">"inner"</span>; 
        <span class="hljs-keyword">return</span> innerScope; <span class="hljs-comment">// 変数innerScopeはcreateScopeのなかでのみ有効</span>
      };
      expect(
        (_) =&gt; {
          innerScope <span class="hljs-comment">// ローカルスコープにある変数innerScopeにアクセスを試みる</span>
        }
      ).to.throwException((e)=&gt; {
        expect(e).to.be.a(
          <span class="hljs-built_in">ReferenceError</span> <span class="hljs-comment">// 参照先が見つからないという例外エラーとなる</span>
        );
      });
      <span class="hljs-comment">/* #@range_end(function_creates_scope) */</span>
      expect(
        createScope()
      ).to.be(
        <span class="hljs-string">"inner"</span>
      );
      next();
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p><strong>リスト4.26</strong> 入れ子になった関数の変数バインド</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">'入れ子になった関数の変数バインド'</span>, (next) =&gt; {
      <span class="hljs-comment">/* #@range_begin(binding_in_closure) */</span>
      <span class="hljs-keyword">var</span> adder = (y) =&gt; { <span class="hljs-comment">// 外側の関数</span>
        <span class="hljs-keyword">var</span> addWithFreeVariable = (x) =&gt; { <span class="hljs-comment">// 内側の関数</span>
          <span class="hljs-keyword">return</span> x + y; <span class="hljs-comment">// 変数yはadder関数の引数yを参照できる</span>
        };
        <span class="hljs-keyword">return</span> addWithFreeVariable;
      };
      <span class="hljs-comment">/* #@range_end(binding_in_closure) */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p><strong>リスト4.27</strong> 入れ子になった関数の適用 </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-comment">/* #@range_begin(binding_in_closure_test) */</span>
      expect(
        adder(<span class="hljs-number">2</span>)(<span class="hljs-number">3</span>)
      ).to.eql(
        <span class="hljs-number">5</span>
      );
      <span class="hljs-comment">/* #@range_end(binding_in_closure_test) */</span>
      next();
    });
  });
});</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <h2 id="4-5-section-id-mechanism-of-referential-transparency-section-">4.5 <section id='mechanism-of-referential-transparency'>参照透過性の仕組み</section></h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>describe(<span class="hljs-string">'参照透過性の仕組み'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <h3 id="-section-id-mechanism-of-immutability-section-"><section id='mechanism-of-immutability'>不変なデータの仕組み</section></h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  describe(<span class="hljs-string">'不変なデータの仕組み'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p><strong>リスト4.28</strong> 基本型は値としてのデータである</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">'基本型は値としてのデータである'</span>, (next) =&gt; {
      <span class="hljs-comment">/* #@range_begin(basic_type_is_value_type) */</span>
      <span class="hljs-keyword">var</span> n = <span class="hljs-number">1</span>;
      expect(
        n
      ).to.eql(
        <span class="hljs-number">1</span>
      );
      <span class="hljs-keyword">var</span> s = <span class="hljs-string">"hello"</span>;
      expect(
        s
      ).to.eql(
        <span class="hljs-string">"hello"</span>
      );
      <span class="hljs-comment">/* #@range_end(basic_type_is_value_type) */</span>
      expect(
        n
      ).to.eql(
        <span class="hljs-number">1</span>
      );
      expect(
        s
      ).to.eql(
        <span class="hljs-string">"hello"</span>
      );
      next();
    });
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <h3 id="-section-id-mechanism-of-assingment-section-"><section id='mechanism-of-assingment'>代入の仕組みと効果</section></h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  describe(<span class="hljs-string">'代入の仕組みと効果'</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p><strong>リスト4.29</strong> 変数への代入</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">'変数への代入'</span>, (next) =&gt; {
      <span class="hljs-comment">/* #@range_begin(assign_to_variable) */</span>
      <span class="hljs-keyword">var</span> age = <span class="hljs-number">29</span>;
      expect(
        age
      ).to.eql(
        <span class="hljs-number">29</span>
      );
      <span class="hljs-comment">/* この時点で誕生日を迎えた */</span>
      age = <span class="hljs-number">30</span>;
      expect(
        age
      ).to.eql(
        <span class="hljs-number">30</span>
      );
      <span class="hljs-comment">/* #@range_end(assign_to_variable) */</span>
      next();
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p><a name="mechanism-of-assignment"> <strong>代入の仕組み</strong> </a>
<img src="images/mechanism-of-assignment.gif" alt="代入の仕組み"> </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  });
});</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p><a href="index.html">目次に戻る</a> <a href="chap05.spec.html">次章に移る</a> </p>

            </div>
            
        </li>
        
    </ul>
  <!-- <div id="footer">  目次に戻る。 </div> -->
  <!-- </div> -->
</body>
</html>
